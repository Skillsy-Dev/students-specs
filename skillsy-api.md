
# Skillsy - API Документация

[1. Регистрация пользователя для получения результатов тестирования](#title1)  
[2. Авторизация пользователя](#title2)  
[3. Выход из системы](#title3)  
[4. Получение уникальной ссылки (link_id) для тестирования](#title4)  
[5. Регистрация пользователя для прохождения тестирования по ссылке (link_id)](#title5)  
[6. Получение списка вопросов с шестью вариантами ответов](#title6)  
[7. Получение списка вопросов с вариантами ответов Скорее согласен/Скорее не согласен](#title7)  
[8. Регистрация ответа на вопросы](#title8)  
[9. Завершение тестирования](#title9)   
[10. Список пользователей, прошедших тестирование](#title10)  
[11. Просмотр результатов тестирования](#title11)   

### <a id="title1">1. Регистрация пользователя для получения результатов тестирования</a>
**Метод:** `POST /api/auth/users/`

**Ожидаемые параметры JSON:**
```json
{
    "email": "",
    "password": "",
    "first_name": "",
    "last_name": "",
    "company": "",
    "language": ""
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "id": 57,
    "email": "yourmail@gmail.com",
    "first_name": "John",
    "last_name": "Doe",
    "company": "Your Company",
    "date": "2024-09-17T15:41:50.186715+02:00",
    "language": "ru"
}
```

---

### <a id="title2">2. Авторизация пользователя</a>
**Метод:** `POST /api/auth/token/login/`

Token-based HTTP Authentication

**Ожидаемые параметры JSON:**
```json
{
    "email": "",
    "password": ""
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "auth_token": "{token}"
}
```

---

### <a id="title3">3. Выход из системы</a>
**Метод:** `POST /api/auth/token/logout/`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

---

### <a id="title4">4. Получение уникальной ссылки (link_id) для тестирования</a>
**Метод:** `GET /api/generate/`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "link_id": "35d02ddc-1164-42e6-8ee8-e2b2f54baaa5",
    "client_name": "John",
    "client_company": "Your Company"
}
```

**Пример ссылки**
https://skillsy.service.ru/35d02ddc-1164-43e6-8ee8-e2b2f54baaa5

---

### <a id="title5">5. Регистрация пользователя для прохождения тестирования по ссылке (link_id)</a>
**Метод:** `POST /api/user/{link_id}/welcome/`

**Ожидаемые параметры JSON:**
```json
{
    "email": "",
    "first_name": "",
    "last_name": "",
    "language": "",
    "linkedin": ""
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "user_id": 54843
}
```

---

### <a id="title6">6. Получение списка вопросов с шестью вариантами ответов</a>
**Метод:** `GET /api/questions/?user_id={user_id}`

**Пример ответа JSON (200 OK):**
```json
[
  {
    "id": 1,
    "text": "Вы пришли на мероприятие, которое проводит известный эксперт в вашей области. В зале три ряда мест. Вы – один из первых и все места свободны. Какое место вы выберете для себя? \r\nВ первом ряду, скорее всего, в центре, как можно ближе к спикеру. Я хочу иметь возможность быть заметным и первым задавать вопросы.\r\nЯ выберу одно из мест во втором ряду, так мне будет комфортно – не слишком близко и не слишком далеко.\r\nВ третьем ряду – не хочу привлекать внимание, возможно мне захочется заняться своими делами – ответить на сообщение или проверить новости.\r\nЯ выберу одно из мест у проходов – мне важно чувствовать определенную свободу, чтобы в случае необходимости я мог выйти, не доставляя дискомфорта другим.\r\nМне не принципиально, куда садиться, я думаю, что смогу получить то, зачем пришел, независимо от места.\r\nЯ не буду садиться, пока не войдут другие участники встречи. Мой выбор будет зависеть от того, как какие места выберут они – например, я могу сесть рядом с тем, кого хорошо знаю."
  },
  {
    "id": 2,
    "text": "Вы пришли на мероприятие, которое проводит известный эксперт в вашей области. В зале три ряда мест. Вы – один из первых и все места свободны. Какое место вы выберете для себя? \r\nВ первом ряду, скорее всего, в центре, как можно ближе к спикеру. Я хочу иметь возможность быть заметным и первым задавать вопросы.\r\nЯ выберу одно из мест во втором ряду, так мне будет комфортно – не слишком близко и не слишком далеко.\r\nВ третьем ряду – не хочу привлекать внимание, возможно мне захочется заняться своими делами – ответить на сообщение или проверить новости.\r\nЯ выберу одно из мест у проходов – мне важно чувствовать определенную свободу, чтобы в случае необходимости я мог выйти, не доставляя дискомфорта другим.\r\nМне не принципиально, куда садиться, я думаю, что смогу получить то, зачем пришел, независимо от места.\r\nЯ не буду садиться, пока не войдут другие участники встречи. Мой выбор будет зависеть от того, как какие места выберут они – например, я могу сесть рядом с тем, кого хорошо знаю."
  }
]
```

---

### <a id="title7">7. Получение списка вопросов с вариантами ответов Скорее согласен/Скорее не согласен</a>
**Метод:** `GET /api/second-questions/?user_id={user_id}`

**Пример ответа JSON (200 OK):**
```json
[
  {
    "id": 20,
    "text": "Работать по ночам - нормально для меня."
  },
  {
    "id": 21,
    "text": "В споре я всегда встану на сторону слабого, даже если он не прав."
  }
]
```

---

### <a id="title8">8. Регистрация ответа на вопросы</a>
**Метод:** `POST /api/questions/{link_id}/{question_id}/submit-answer/`

**Ожидаемые параметры JSON:**
```json
{
    "answer": "{answer choice number}",
    "user": "{user_id}"
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "answer": 3,
    "user": 77,
    "date": "2024-09-17T16:22:28.282035+02:00"
}
```

---

### <a id="title9">9. Завершение тестирования</a>
**Метод:** `POST /api/submit-test/`

При завершении тестирования владельцу ссылки (link_id) отправляется уведомление о доступности результатов тестирования

**Ожидаемые параметры JSON:**
```json
{
    "user_id": "{user_id}",
    "link_id": "{link_id}"
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "message": "Test results are ready"
}
```

---

### <a id="title10">10. Список пользователей, прошедших тестирование</a>
**Метод:** `GET /api/candidates_list/`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

**Пример ответа JSON (200 OK):**
```json
[
    {
        "user_id": 75,
        "first_name": "Tim",
        "last_name": "sdf",
        "date_of_completion": "2024-08-23T10:12:09.883762Z"
    },
    {
        "user_id": 74,
        "first_name": "asdf",
        "last_name": "asdf",
        "date_of_completion": "2024-08-13T08:59:14.816354Z"
    }
]
```

---

### <a id="title11">11. Просмотр результатов тестирования</a>
**Метод:** `GET /api/user/{user_id}/report-result/`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

**Пример ответа JSON (200 OK):**
```json
{
  "first_name": "Ivan",
  "last_name": "Petrov",
  "email": "petrov@ivan.com",
  "linkedin": "",
  "manager_params": [
    {
      "param_name": "Ключевые ценности",
      "description": [
        "\nКлючевые ценности проявляются во всех сферах жизни человека и определяют его выбор и решения\n"
      ],
      "param_text": "\n<strong>Стремление к самореализации</strong>\nЭтот кандидат/сотрудник стремится к самореализации, изучает себя и свою индивидуальность и ищет пути для оптимального воплощения своих сильных качеств.\n"
    },
    {
      "param_name": "Командная роль",
      "description": [
        "\nЛидер, эксперт или уверенный командный игрок?\n\nКомандная роль вашего кандидата/сотрудника может отличаться от формальной роли, но важно понимать, к какой реализации в команде он стремится на самом деле\n"
      ],
      "param_text": "\n<strong>Лидер - Партнер</strong>\nВ команде этот кандидат/сотрудник стремится к лидерской позиции через синергию, коммуникацию и эффективное взаимодействие.\n"
    }
  ]
}
```

--- 
