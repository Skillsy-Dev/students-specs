
# Skillsy - API Документация

[1. Регистрация пользователя для получения результатов тестирования](#title1)  
[2. Авторизация пользователя](#title2)  
[3. Выход из системы](#title3)  
[4. Получение уникальной ссылки (link_id) для тестирования](#title4)  
[5. Регистрация пользователя для прохождения тестирования по ссылке (link_id)](#title5)  
[6. Получение списка вопросов с шестью вариантами ответов](#title6)  
[7. Получение списка вопросов с вариантами ответов Скорее согласен/Скорее не согласен](#title7)  
[8. Регистрация ответа на вопросы](#title8)  
[9. Завершение тестирования](#title9)   
[10. Список пользователей, прошедших тестирование](#title10)  
[11. Просмотр результатов тестирования](#title11)   

### <a id="title1">1. Регистрация сервисного пользователя для получения результатов тестирования</a>
**Метод:** `POST /api/auth/users`

**Ожидаемые параметры JSON:**
```json
{
    "email": "",
    "password": "",
    "company": "",
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "id": 57,
    "email": "yourmail@gmail.com",
    "company": "Your Company",
    "date": "2024-09-17T15:41:50.186715+02:00",
}
```

---

### <a id="title2">2. Авторизация сервисного пользователя</a>
**Метод:** `POST /api/auth/token/login`

Token-based HTTP Authentication

**Ожидаемые параметры JSON:**
```json
{
    "email": "",
    "password": ""
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "auth_token": "{token}"
}
```

---

### <a id="title3">3. Выход из системы</a>
**Метод:** `POST /api/auth/token/logout`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

---

### <a id="title4">4. Получение уникальной ссылки (link_id) для тестирования</a>
**Метод:** `GET /api/link`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "id": "35d02ddc-1164-42e6-8ee8-e2b2f54baaa5",
    "company": "Your Company"
}
```

**Пример ссылки**
https://skillsy.service.ru/35d02ddc-1164-43e6-8ee8-e2b2f54baaa5

---

### <a id="title5">5. Регистрация пользователя для прохождения тестирования по ссылке (link_id)</a>
**Метод:** `POST /api/user/{link_id}/welcome`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

**Ожидаемые параметры JSON:**
```json
{
    "external_user_id": "{external_user_id}",
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "user_id": 54843
}
```

---

### <a id="title6">6. Получение списка вопросов с шестью вариантами ответов</a>
**Метод:** `GET /api/questions`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

**Пример ответа JSON (200 OK):**
```json
[
  {
    "id": 1,
    "text": "Вы пришли на мероприятие, которое проводит известный эксперт в вашей области. В зале три ряда мест. Вы – один из первых и все места свободны. Какое место вы выберете для себя?",
    "answers": [
       { "id": 1,
         "text": "В первом ряду"
       },
       { "id": 2,
         "text": "Во втором ряду"
       },
       ...
    ] 
  },
  {
    "id": 2,
    "text": "Какое суждение вам ближе, когда вы видите на улице бездомного человека, который просит помочь ему деньгами или едой?",
    "answers": [
       { "id": 1,
         "text": "Честно говоря, я думаю, что это не мои проблемы"
       },
       { "id": 2,
         "text": "Мне жаль, что его жизнь сложилась именно так, но я не пытаюсь помогать"
       },
       ...
    ] 
  }
]
```

---

### <a id="title7">7. Получение списка вопросов с вариантами ответов Скорее согласен/Скорее не согласен</a>
**Метод:** `GET /api/second-questions`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

**Пример ответа JSON (200 OK):**
```json
[
  {
    "id": 20,
    "text": "Работать по ночам - нормально для меня."
  },
  {
    "id": 21,
    "text": "В споре я всегда встану на сторону слабого, даже если он не прав."
  }
]
```

---

### <a id="title8">8. Регистрация ответа на вопросы</a>
**Метод:** `POST /api/questions/{link_id}/{question_id}/submit-answer`

**Ожидаемые параметры JSON:**
```json
{
    "answer": "{answer choice number}",
    "external_user_id": "{external_user_id}"
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "answer": 3,
    "user_id": 77,
    "date": "2024-09-17T16:22:28.282035+02:00"
}
```

---

### <a id="title9">9. Завершение тестирования</a>
**Метод:** `POST /api/submit-test`

При завершении тестирования владельцу ссылки (link_id) отправляется уведомление о доступности результатов тестирования

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

**Ожидаемые параметры JSON:**
```json
{
    "external_user_id": "{external_user_id}",
    "link_id": "{link_id}"
}
```

**Пример ответа JSON (200 OK):**
```json
{
    "message": "Test results are ready"
}
```

---

### <a id="title10">10. Список пользователей, прошедших тестирование</a>
**Метод:** `GET /api/users_list`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

**Пример ответа JSON (200 OK):**
```json
[
    {
        "user_id": 75,
        "date_of_completion": "2024-08-23T10:12:09.883762Z"
    },
    {
        "user_id": 74,
        "date_of_completion": "2024-08-13T08:59:14.816354Z"
    }
]
```

---

### <a id="title11">11. Просмотр результатов тестирования</a>
**Метод:** `GET /api/user/{external_user_id}/report`

**Ожидаемые параметры при запросе:**
```
headers: {
    "Authorization": "Token ${token}"
}
```

**Ожидаемые параметры JSON:**
```json
{
    "report_type": "{report_type}"
}
```

**Пример ответа JSON (200 OK):**
```json
{
  "user_id": 75,
  "report" : {
    "type" : "INDIVIDUAL"
    "description" : "Индивидуальный отчет" 

    "section": [{
       "type" : "WORK_RELATED",
       "description" : "Профессиональная сфера",
       "params" : [{
          "name": "Ключевые ценности",
          "description": "Ключевые ценности проявляются во всех сферах жизни человека и определяют его выбор и решения",
          "text": "\n<strong>Стремление к самореализации</strong>\nЭтот кандидат/сотрудник стремится к самореализации, изучает себя и свою индивидуальность и ищет пути для оптимального воплощения своих сильных качеств.\n"
          },
          {
          "name": "Командная роль",
          "description": "Лидер, эксперт или уверенный командный игрок? Командная роль вашего кандидата/сотрудника может отличаться от формальной роли, но важно понимать, к какой реализации в команде он стремится на самом деле",
          "text": "\n<strong>Лидер - Партнер</strong>\nВ команде этот кандидат/сотрудник стремится к лидерской позиции через синергию, коммуникацию и эффективное взаимодействие.\n"
          }
        ]
      }
   ]
 }
}
```

--- 
